// In-memory registry of known storage keys per storage URI, scoped to this process
const storageUriToKeys = new Map();
export function registerKnownKey(storageUri, key) {
    if (!storageUri || !key)
        return;
    const uri = storageUri;
    const set = storageUriToKeys.get(uri) ?? new Set();
    set.add(key);
    storageUriToKeys.set(uri, set);
}
export function isKnownKey(storageUri, key) {
    const set = storageUriToKeys.get(storageUri);
    if (!set)
        return false;
    return set.has(key);
}
export function getKnownKeys(storageUri) {
    if (storageUri) {
        return Array.from(storageUriToKeys.get(storageUri) ?? []);
    }
    const all = [];
    for (const set of storageUriToKeys.values()) {
        for (const key of set)
            all.push(key);
    }
    return all;
}
